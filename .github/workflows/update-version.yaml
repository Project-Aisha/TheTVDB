name: Update Version

on:
  schedule:
    # [INFO] daily.
    - cron: 0 0 * * *
  workflow_dispatch: {}

jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
      - uses: DeterminateSystems/nix-installer-action@v14
      - uses: DeterminateSystems/magic-nix-cache-action@v8
      - uses: Swatinem/rust-cache@v2
      - uses: nicknovitski/nix-develop@v1
        with:
          arguments: .#github-actions --impure
      - run: generate-thetvdb-client
      - uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: Apply changes generated by openapi-generate-cli
          commit_author: github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>
